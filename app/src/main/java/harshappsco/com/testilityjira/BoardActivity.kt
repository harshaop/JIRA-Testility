package harshappsco.com.testilityjira

import android.content.Intent
import android.os.Bundle
import android.support.design.widget.TabLayout
import android.support.v4.view.ViewPager
import android.support.v7.app.AppCompatActivity
import android.util.Base64
import com.google.gson.GsonBuilder
import harshappsco.com.testilityjira.database.IssueDbTable
import kotlinx.android.synthetic.main.activity_board.*
import okhttp3.*
import java.io.IOException
import java.net.URL


class BoardActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_board)
        setSupportActionBar(my_toolbar)

        nav_bottom_board.menu.getItem(1).setChecked(true)
        nav_bottom_board.setOnNavigationItemSelectedListener { item ->
            when (item.itemId) {
                R.id.nav_issue -> {
                    startActivity(Intent(this, MainActivity::class.java))
                }
                R.id.nav_board -> {

                }
                R.id.nav_profile -> {
                    startActivity(Intent(this, ProfileActivity::class.java))
                }
            }
            return@setOnNavigationItemSelectedListener true
        }

        fetchBoardConfig()
        fetchJson()

    }

    private fun configureTabLayout() {

        val adapter = TabPagerAdapter(supportFragmentManager, tab_layout.tabCount )
        viewpager_container.adapter = adapter

        tab_layout.addOnTabSelectedListener(object : TabLayout.OnTabSelectedListener {
            override fun onTabReselected(tab: TabLayout.Tab?) {}
            override fun onTabUnselected(tab: TabLayout.Tab?) {}
            override fun onTabSelected(tab: TabLayout.Tab) {
                viewpager_container.currentItem = tab.position
            }
        })

        viewpager_container.addOnPageChangeListener(object : ViewPager.OnPageChangeListener {
            override fun onPageScrollStateChanged(state: Int) {
            }

            override fun onPageScrolled(position: Int, positionOffset: Float, positionOffsetPixels: Int) {
            }

            override fun onPageSelected(position: Int) {
                tab_layout.getTabAt(position)?.select()
            }
        })
    }

    private fun fetchBoardConfig() {
        val urlString = "https://" + "jira.hm.com" + "/rest/agile/1.0/board"+"/940/configuration/"
        val url = URL(urlString)
        val auth = Base64.encodeToString(("tempharop" + ":" + "Start10").toByteArray(charset("UTF-8")), Base64.NO_WRAP)
        val headers = Headers.Builder()
                .set("Authorization", "Basic $auth")
                .set("X-Atlassian-Token", "no-check")
                .build()
        val request = Request.Builder()
                .url(url)
                .headers(headers)
                .build()
        val client = OkHttpClient()

        client.newCall(request).enqueue(object : Callback {
            override fun onFailure(call: Call?, e: IOException?) {
                println("Request Failed")
            }

            override fun onResponse(call: Call?, response: Response?) {
                val body = response?.body()?.string()
               val body1 = "{\"id\":940,\"name\":\"hm.com - Mobile Scrum Board\",\"type\":\"scrum\",\"self\":\"https://jira.hm.com/rest/agile/1.0/board/940/configuration\",\"filter\":{\"id\":\"36258\",\"self\":\"https://jira.hm.com/rest/api/2/filter/36258\"},\"columnConfig\":{\"columns\":[{\"name\":\"To Do\",\"statuses\":[{\"id\":\"1\",\"self\":\"https://jira.hm.com/rest/api/2/status/1\"},{\"id\":\"4\",\"self\":\"https://jira.hm.com/rest/api/2/status/4\"},{\"id\":\"10050\",\"self\":\"https://jira.hm.com/rest/api/2/status/10050\"},{\"id\":\"10024\",\"self\":\"https://jira.hm.com/rest/api/2/status/10024\"},{\"id\":\"10016\",\"self\":\"https://jira.hm.com/rest/api/2/status/10016\"},{\"id\":\"10036\",\"self\":\"https://jira.hm.com/rest/api/2/status/10036\"}]},{\"name\":\"Development\",\"statuses\":[{\"id\":\"3\",\"self\":\"https://jira.hm.com/rest/api/2/status/3\"},{\"id\":\"10037\",\"self\":\"https://jira.hm.com/rest/api/2/status/10037\"}]},{\"name\":\"Code review\",\"statuses\":[{\"id\":\"10266\",\"self\":\"https://jira.hm.com/rest/api/2/status/10266\"},{\"id\":\"10057\",\"self\":\"https://jira.hm.com/rest/api/2/status/10057\"},{\"id\":\"10031\",\"self\":\"https://jira.hm.com/rest/api/2/status/10031\"}]},{\"name\":\"Ready for Test\",\"statuses\":[{\"id\":\"10015\",\"self\":\"https://jira.hm.com/rest/api/2/status/10015\"},{\"id\":\"10020\",\"self\":\"https://jira.hm.com/rest/api/2/status/10020\"},{\"id\":\"10007\",\"self\":\"https://jira.hm.com/rest/api/2/status/10007\"},{\"id\":\"10025\",\"self\":\"https://jira.hm.com/rest/api/2/status/10025\"},{\"id\":\"10021\",\"self\":\"https://jira.hm.com/rest/api/2/status/10021\"},{\"id\":\"10042\",\"self\":\"https://jira.hm.com/rest/api/2/status/10042\"},{\"id\":\"10041\",\"self\":\"https://jira.hm.com/rest/api/2/status/10041\"},{\"id\":\"10039\",\"self\":\"https://jira.hm.com/rest/api/2/status/10039\"}]},{\"name\":\"Being Tested\",\"statuses\":[{\"id\":\"10033\",\"self\":\"https://jira.hm.com/rest/api/2/status/10033\"},{\"id\":\"10040\",\"self\":\"https://jira.hm.com/rest/api/2/status/10040\"},{\"id\":\"10010\",\"self\":\"https://jira.hm.com/rest/api/2/status/10010\"}]},{\"name\":\"Ready for Acceptance test\",\"statuses\":[{\"id\":\"10366\",\"self\":\"https://jira.hm.com/rest/api/2/status/10366\"},{\"id\":\"10022\",\"self\":\"https://jira.hm.com/rest/api/2/status/10022\"},{\"id\":\"10004\",\"self\":\"https://jira.hm.com/rest/api/2/status/10004\"}]},{\"name\":\"Done\",\"statuses\":[{\"id\":\"5\",\"self\":\"https://jira.hm.com/rest/api/2/status/5\"},{\"id\":\"6\",\"self\":\"https://jira.hm.com/rest/api/2/status/6\"}]}],\"constraintType\":\"none\"},\"estimation\":{\"type\":\"field\",\"field\":{\"fieldId\":\"customfield_10093\",\"displayName\":\"Story Points\"}},\"ranking\":{\"rankCustomFieldId\":16870}}"
                val gson = GsonBuilder().create()
                val boardConfig = gson.fromJson(body1, BoardConfig::class.java)

//                val tabName = getSharedPreferences("harshappsco.com.testilityjira.TABNAMES", Context.MODE_PRIVATE)
//                val i=1
//                tabName.edit().putString("TAB$i", name.name).apply()

                runOnUiThread {
                for (name in boardConfig.columnConfig.columns){
                    tab_layout.addTab(tab_layout.newTab().setText(name.name))
                }
                    configureTabLayout()
                }
            }
        })
    }

    private fun fetchJson() {
        val urlString = "https://" + "jira.hm.com" + "/rest/agile/1.0/board" + "/940/sprint/6154/issue?maxResults=200&fields=summary,issuetype,priority,status"
        val url = URL(urlString)
        val auth = Base64.encodeToString(("tempharop" + ":" + "Start10").toByteArray(charset("UTF-8")), Base64.NO_WRAP)
        val headers = Headers.Builder()
                .set("Authorization", "Basic $auth")
                .set("X-Atlassian-Token", "no-check")
                .build()
        val request = Request.Builder()
                .url(url)
                .headers(headers)
                .build()

        val client = OkHttpClient()


        client.newCall(request).enqueue(object : Callback {
            override fun onFailure(call: Call?, e: IOException?) {
                println("Request Failed")
            }

            override fun onResponse(call: Call?, response: Response?) {
                val body = response?.body()?.string()
                     val body1 = "{\"expand\":\"schema,names\",\"startAt\":0,\"maxResults\":20,\"total\":77,\"issues\":[{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"706879\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/706879\",\"key\":\"HMCOM-48861\",\"fields\":{\"summary\":\"Clear CosmosDB space from PROD for migrated countries US and AT\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/13\",\"id\":\"13\",\"description\":\"Created by JIRA Software - do not edit or delete. Issue type for a user story.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39965&avatarType=issuetype\",\"name\":\"Story\",\"subtask\":false,\"avatarId\":39965},\"description\":\"Favorites of 1487275 users for US and 184798 users for AT stored in cosmosDB that are not used.\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/6\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410173/Resurs%205.png\",\"name\":\"None\",\"id\":\"6\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/6\",\"description\":\"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/closed.png\",\"name\":\"Closed\",\"id\":\"6\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/3\",\"id\":3,\"key\":\"done\",\"colorName\":\"green\",\"name\":\"Done\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"485761\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/485761\",\"key\":\"HMCOM-33908\",\"fields\":{\"summary\":\"[Android][Tech]\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/13\",\"id\":\"13\",\"description\":\"Created by JIRA Software - do not edit or delete. Issue type for a user story.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39965&avatarType=issuetype\",\"name\":\"Story\",\"subtask\":false,\"avatarId\":39965},\"description\":\"We would like to get which cards that are available on which markets from backend. Right now is is hardcoded in the app.\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/6\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410173/Resurs%205.png\",\"name\":\"None\",\"id\":\"6\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"517981\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/517981\",\"key\":\"HMCOM-36715\",\"fields\":{\"summary\":\"[Test Only] Clean up dummy arguments passed to copy texts in jsp\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/3\",\"id\":\"3\",\"description\":\"A task that needs to be done.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39966&avatarType=issuetype\",\"name\":\"Task\",\"subtask\":false,\"avatarId\":39966},\"description\":\"There are lot of places in jsp code where 3 arguments are passed to copy text when it accepts only 2 arguments.\\r\\n\\r\\nThis jira is to clean up dummy arguments passed to copy texts in jsp. We require a regression testing from mobile team on below scenario as the changes are done for mobile project JSP's also.\\r\\n1)User Registration page (without selecting the join club checkbox)\\r\\n2)User registration Page with selecting join club checkbox\\r\\n3)checkout screen \\r\\n4)Manage subscription page\\r\\n5)DK migration prefilled  page\\r\\n\\r\\nPlease check  the attachment for more details.\\r\\nRelated issue: https://jira.hm.com/browse/HMCOM-26981\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/9\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410171/Resurs%203.png\",\"name\":\"3-Could\",\"id\":\"9\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"614497\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/614497\",\"key\":\"HMCOM-44487\",\"fields\":{\"summary\":\"Create a iOS/Android System Context Map\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/3\",\"id\":\"3\",\"description\":\"A task that needs to be done.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39966&avatarType=issuetype\",\"name\":\"Task\",\"subtask\":false,\"avatarId\":39966},\"description\":\"As part of an initiative started by the Joshua architectural forum, all JOSHUA modules should have a context map documenting their integration points.\\r\\n\\r\\nThe Platform Team has already created such a map for the ECOM module, and this modules map should follow the same conventions used in that map: \\r\\n [https://confluence.hm.com/display/JOS/Integrations+and+systems]\\r\\n\\r\\nClicking this module there should lead to more details about this module.\\r\\n\\r\\nIt's also important to verify that the map above is correct with how this module integrates with ECOM.\\r\\n\\r\\nThe main JIRA tracking the effort across the JOSHUA modules is HMCOM-37171\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"614498\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/614498\",\"key\":\"HMCOM-44488\",\"fields\":{\"summary\":\"Create a MyStyle System Context Map\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/3\",\"id\":\"3\",\"description\":\"A task that needs to be done.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39966&avatarType=issuetype\",\"name\":\"Task\",\"subtask\":false,\"avatarId\":39966},\"description\":\"As part of an initiative started by the Joshua architectural forum, all JOSHUA modules should have a context map documenting their integration points.\\r\\n\\r\\nThe Platform Team has already created such a map for the ECOM module, and this modules map should follow the same conventions used in that map: \\r\\n [https://confluence.hm.com/display/JOS/Integrations+and+systems]\\r\\n\\r\\nClicking this module there should lead to more details about this module.\\r\\n\\r\\nIt's also important to verify that the map above is correct with how this module integrates with ECOM.\\r\\n\\r\\nThe main JIRA tracking the effort across the JOSHUA modules is HMCOM-37171\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"391267\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/391267\",\"key\":\"HMCOM-25429\",\"fields\":{\"summary\":\"CEAT - story template\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/13\",\"id\":\"13\",\"description\":\"Created by JIRA Software - do not edit or delete. Issue type for a user story.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39965&avatarType=issuetype\",\"name\":\"Story\",\"subtask\":false,\"avatarId\":39965},\"description\":\"h3. User story\\r\\n*AS A* some text...\\r\\n*I WANT TO* ...\\r\\n*SO THAT* ...\\r\\n\\r\\nh4. Background/Business needs\\r\\nsome text...\\r\\n\\r\\nh4. Dependencies\\r\\nsome text...\\r\\n\\r\\nh4. Notes/Detailed Requirement\\r\\nsome text...\\r\\n\\r\\nh4. UX\\r\\nsome text + Invision link...\\r\\n\\r\\nh4. Business contacts\\r\\n•\\tResponsible BSA: \\r\\n•\\tResponsible UX: \\r\\n\\r\\n_Remember to always link stories to respective OLIN case if there is one_\\r\\n\\r\\nh3. Acceptance criteria\\r\\nh5. Scenario 1: Title\\r\\nGIVEN Customer...\\r\\nAND Customer...\\r\\nWHEN Customer...\\r\\nTHEN ...\\r\\nh5. Scenario 2: Title\\r\\n...\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/6\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410173/Resurs%205.png\",\"name\":\"None\",\"id\":\"6\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/3\",\"description\":\"This issue is being actively worked on at the moment by the assignee.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/inprogress.png\",\"name\":\"In Progress\",\"id\":\"3\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/4\",\"id\":4,\"key\":\"indeterminate\",\"colorName\":\"yellow\",\"name\":\"In Progress\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"704423\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/704423\",\"key\":\"HMCOM-48804\",\"fields\":{\"summary\":\"[Frontend]Tablet - Privacy Notice text overlay should be aligned with the text \",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"When the user creates an Account in MY H&M and wants to edit / change the info in MY H&M then the General Privacy Notice displayed is not aligned with the text. \\r\\n\\r\\nActual Results :- The second line of the text is aligned with the tick box \\r\\nExpected Results :- The second line must be aligned with the 1st line of the text \\r\\nFor more info see screenshot attached  \",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/9\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410171/Resurs%203.png\",\"name\":\"3-Could\",\"id\":\"9\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"708117\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/708117\",\"key\":\"HMCOM-48888\",\"fields\":{\"summary\":\"[Smartweb] Customer sees details of other customer  (incident : ITINC0655544)\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"when our customer 303767297 tries to login her account, she can see all details of another customer and that person, she doesn´t even know. She can see all details of the following customer: 332949445 could you please take a look.\\r\\n\\r\\nCustomer team has done the initial validation and here are  thier inputs:\\r\\nOCG Customer Team Update : \\r\\nWe analyzed the logs and found to be a problem with session been shared between two users 303767297 & 332949445. \\r\\nAlso, an interesting fact is that the touch point is Mobile. Hence, requesting your investigation on this and let us know any interesting finding on the same, which could avoid Data Integrity and Security issue. \\r\\nPlease reach out to Lakshmipath from Customer Team for more info. \\r\\nNeed your quick action on this to help in finding the root cause. Thank You.\\r\\n\\r\\n\\r\\nEnvironment : Production\\r\\nTouch Point : Smartweb\\r\\nDevice : Not aware, raised clarification to Customer.\\r\\n\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"707975\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/707975\",\"key\":\"HMCOM-48895\",\"fields\":{\"summary\":\"[WebView] Pointing to wrong url after deleting the product in checkout\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"*Touch Points:* Mobile Web\\r\\n*Environment*: Production\\r\\n\\r\\n*Issue*: When user delete product in checkout - Order pane. Product is getting deleted and pointing to wrong url.  \\r\\n\\r\\n*Steps to reproduce:*\\r\\n1. Login to account and add only one item to shopping bag.\\r\\n2. Proceed to checkout\\r\\n3. Expand 'Order Pane' -> click on Edit icon -> click on Delete button\\r\\n\\r\\n*Actual*: Product got deleted and page is navigated to start page with wrong url : https://sit-m.hm.com/de/?paneExpanded=orderSummary\\r\\n\\r\\nAttached screenshot named \\\"ordersummary\\\"\\r\\n\\r\\n*Expected*: After the product deleted, page should navigate to empty shopping bag.\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"711747\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/711747\",\"key\":\"HMCOM-48974\",\"fields\":{\"summary\":\"[Smartweb][Frontend] [ITINC0673961] App icon is white color instead of red color in smartbanner\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"[Smartweb] App icon is white color instead of red color in smartbanner\\r\\n\\r\\n*Business Impact:* No functionality issue. The customer may get confused with type apps (GOEP/Joshua)\\r\\n\\r\\n \\r\\n\\r\\n*Incident* ITINC0673961\\r\\n \\r\\n*Steps to Reproduce:*\\r\\n\\r\\n1. Clear cookie and temp files of the browser of mobile\\r\\n2. Open m.hm.com/de\\r\\n3. Check for the app icon in the smartbanner \\r\\n\\r\\n*Actual Result:* App icon is white one\\r\\n*Expected Result:* As its Joshua market, the app icon should be red one\\r\\n\\r\\n*Env Details* \\r\\nMkt: DE \\r\\nproduction - JUN2018 release \\r\\nNexus 6P Android 8.1 - chrome , iPhone 6Plus iOS 10.2 - Safari\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"708874\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/708874\",\"key\":\"HMCOM-48915\",\"fields\":{\"summary\":\"[Android] [SIT] Forcing user to login again while editing user profile\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"*Steps to reproduce: *\\r\\n1. Do simple registration\\r\\n2. After login, register to H&M club and log out\\r\\n3. Login again and navigate to Profile page.\\r\\n4. Click on Edit profile to edit the details.\\r\\n\\r\\n*Expected*: Should display edit details page\\r\\n\\r\\n*Actual*: Edit page is not displaying and forcing user to enter password to login again.\\r\\n\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"688305\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/688305\",\"key\":\"HMCOM-48277\",\"fields\":{\"summary\":\"[Tablet] Create a dynamic PRA area\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/13\",\"id\":\"13\",\"description\":\"Created by JIRA Software - do not edit or delete. Issue type for a user story.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39965&avatarType=issuetype\",\"name\":\"Story\",\"subtask\":false,\"avatarId\":39965},\"description\":\"h3. User story\\r\\n*AS A* HM customer\\r\\n*I WANT TO* have hm.com to load fast\\r\\n*SO THAT* I dont have to wait for the content to load\\r\\n\\r\\nh4. Background/Business needs\\r\\n\\r\\nToday PRA is implemented in at least 4 different ways with different look and feel. To make PRAs more perfomant (less code, less rendering and better cached), easier to maintain and more aligned design vice there is a need for a component. \\r\\n\\r\\nFor now, we will only let the developers control the configuration of the PRA´s. Maybe in a later stage we can create dynamic properites for it to let Business people control it.\\r\\n\\r\\nDuring the work with favorites we started to work on a new PRA CDN component to be used for all browser based touchpoints.\\r\\n * Bitbucket repo: [http://bitbucket.hm.com/projects/FMOD/repos/hm.com-comp-common-product-recommendation-area/browse] \\r\\n * Overview all the PRA areas and their behaviour today in production: [https://confluence.hm.com/display/TP/PRA+overview]\\r\\n\\r\\nh4. Notes/Detailed Requirement\\r\\n\\r\\n * The component should displayed as today\\r\\n * The component should be configurable to:\\r\\n ** show/hide arrows\\r\\n ** show/hide pagination\\r\\n ** be infinite\\r\\n ** show markers\\r\\n ** show swatches\\r\\n\\r\\n\\r\\nh3. Acceptance criteria\\r\\nh5. Scenario 1: arrows displayed\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to display arrows\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the arrows are displayed to the right&left of the pra\\r\\n\\r\\nh5. Scenario 2: arrows hidden\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to hidearrows\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the arrows are hidden to the right&left of the pra area\\r\\n\\r\\nh5. Scenario 3: display pagination\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to show pagination\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the pagination is displayed in the bottom of the PRA area\\r\\n\\r\\nh5. Scenario 4: hide pagination\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to hide pagination\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the pagination is hidden in the bottom of the PRA area\\r\\n\\r\\nh5. Scenario 5: Infinite PRA\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to be infinite \\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area is infinite\\r\\n\\r\\nh5. Scenario 6: Not an Infinite PRA\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to not be infinite \\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area is not infinite\\r\\n\\r\\nh5. Scenario 7: display markers\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to display markers\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area should display markers\\r\\n\\r\\nh5. Scenario 8: Hide markers\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to hide markers\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area should hide markers\\r\\n\\r\\nh5. Scenario 9: display swatches\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to display swatches\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area should display swatches\\r\\n\\r\\nh5. Scenario 10: Hide swatches\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to hide swatches\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area should hide swatches\\r\\n\\r\\n\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/6\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410173/Resurs%205.png\",\"name\":\"None\",\"id\":\"6\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/10050\",\"description\":\"\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/generic.png\",\"name\":\"Ready for Sprint\",\"id\":\"10050\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/4\",\"id\":4,\"key\":\"indeterminate\",\"colorName\":\"yellow\",\"name\":\"In Progress\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"688310\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/688310\",\"key\":\"HMCOM-48279\",\"fields\":{\"summary\":\"[smartweb] Create a dynamic PRA area\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/13\",\"id\":\"13\",\"description\":\"Created by JIRA Software - do not edit or delete. Issue type for a user story.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39965&avatarType=issuetype\",\"name\":\"Story\",\"subtask\":false,\"avatarId\":39965},\"description\":\"h3. User story\\r\\n*AS A* HM customer\\r\\n*I WANT TO* have hm.com to load fast\\r\\n*SO THAT* I dont have to wait for the content to load\\r\\n\\r\\nh4. Background/Business needs\\r\\n\\r\\nToday PRA is implemented in at least 4 different ways with different look and feel. To make PRAs more perfomant (less code, less rendering and better cached), easier to maintain and more aligned design vice there is a need for a component. \\r\\n\\r\\nFor now, we will only let the developers control the configuration of the PRA´s. Maybe in a later stage we can create dynamic properites for it to let Business people control it.\\r\\n\\r\\nDuring the work with favorites we started to work on a new PRA CDN component to be used for all browser based touchpoints.\\r\\n * Bitbucket repo: [http://bitbucket.hm.com/projects/FMOD/repos/hm.com-comp-common-product-recommendation-area/browse] \\r\\n * Overview all the PRA areas and their behaviour today in production: [https://confluence.hm.com/display/TP/PRA+overview]\\r\\n\\r\\nh4. Notes/Detailed Requirement\\r\\n\\r\\n * The component should displayed as today\\r\\n * The component should be configurable to:\\r\\n ** show/hide arrows\\r\\n ** show/hide pagination\\r\\n ** be infinite\\r\\n ** show markers\\r\\n ** show swatches\\r\\n\\r\\n\\r\\nh3. Acceptance criteria\\r\\nh5. Scenario 1: arrows displayed\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to display arrows\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the arrows are displayed to the right&left of the pra\\r\\n\\r\\nh5. Scenario 2: arrows hidden\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to hidearrows\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the arrows are hidden to the right&left of the pra area\\r\\n\\r\\nh5. Scenario 3: display pagination\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to show pagination\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the pagination is displayed in the bottom of the PRA area\\r\\n\\r\\nh5. Scenario 4: hide pagination\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to hide pagination\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the pagination is hidden in the bottom of the PRA area\\r\\n\\r\\nh5. Scenario 5: Infinite PRA\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to be infinite \\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area is infinite\\r\\n\\r\\nh5. Scenario 6: Not an Infinite PRA\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to not be infinite \\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area is not infinite\\r\\n\\r\\nh5. Scenario 7: display markers\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to display markers\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area should display markers\\r\\n\\r\\nh5. Scenario 8: Hide markers\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to hide markers\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area should hide markers\\r\\n\\r\\nh5. Scenario 9: display swatches\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to display swatches\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area should display swatches\\r\\n\\r\\nh5. Scenario 10: Hide swatches\\r\\nGIVEN customer enters hm.com\\r\\nAND pra is configed to hide swatches\\r\\nWHEN customer is displayed a pra\\r\\nTHEN the PRA area should hide swatches\\r\\n\\r\\n\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/6\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410173/Resurs%205.png\",\"name\":\"None\",\"id\":\"6\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/10050\",\"description\":\"\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/generic.png\",\"name\":\"Ready for Sprint\",\"id\":\"10050\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/4\",\"id\":4,\"key\":\"indeterminate\",\"colorName\":\"yellow\",\"name\":\"In Progress\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"605298\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/605298\",\"key\":\"HMCOM-43817\",\"fields\":{\"summary\":\"[TECH][iOS] Use new force update image property\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/13\",\"id\":\"13\",\"description\":\"Created by JIRA Software - do not edit or delete. Issue type for a user story.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39965&avatarType=issuetype\",\"name\":\"Story\",\"subtask\":false,\"avatarId\":39965},\"description\":\"h3. User story\\r\\n\\r\\n*AS A* App user\\r\\n*I WANT TO* have force update image displayed\\r\\n*SO THAT* I know I need to update the app\\r\\n\\r\\nh4. Background/Business needs\\r\\nThere are a couple of images that the apps refer to: hm_forceupdate_ios.png and hm_forceupdate_android.png\\r\\n \\r\\nThere are dynamic properties \\\"hmrest.forceupdate.image\\\" which points to /josh/static/mobile/img/forceupdate/hm_forceupdate_ios.png and /josh/static/mobile/img/forceupdate/hm_forceupdate_android.png\\r\\nThese are fetched through API calls from the apps.\\r\\nThe images need to be moved to ecom-image-static (or somewhere else), since we are going to remove \\\"static apache\\\" servers from all environments.\\r\\n\\r\\n\\r\\nh4. Dependencies\\r\\n\\r\\nh4. Notes/Detailed Requirement\\r\\n\\r\\nUse the new dynamic property which leads to ecom-image-static\\r\\n\\r\\nh4.UX\\r\\n\\r\\nh4. Business contacts\\r\\n\\r\\n * Responsible BSA : \\r\\n * Responsible UX : \\r\\n\\r\\n\\r\\nh3. Acceptance criteria\\r\\n\\r\\nh5. Scenario 1: Show force update image (this is the new image but there is no way the verify the URL path)\\r\\nGIVEN force updated is enabled \\r\\nWHEN a customer has the latest version of the app\\r\\nTHEN the force update picture is displayed\\r\\n\\r\\nh5. Scenario 2: Show force update image (this is the old image but there is no way the verify the URL path)\\r\\nGIVEN force updated is enabled \\r\\nWHEN the user has an old version of the app\\r\\nTHEN the force update picture is displayed\\r\\n\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/6\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410173/Resurs%205.png\",\"name\":\"None\",\"id\":\"6\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/10050\",\"description\":\"\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/generic.png\",\"name\":\"Ready for Sprint\",\"id\":\"10050\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/4\",\"id\":4,\"key\":\"indeterminate\",\"colorName\":\"yellow\",\"name\":\"In Progress\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"694218\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/694218\",\"key\":\"HMCOM-48532\",\"fields\":{\"summary\":\"[OLIN-4723] [webview] Give Customers access to club features without DOI\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/13\",\"id\":\"13\",\"description\":\"Created by JIRA Software - do not edit or delete. Issue type for a user story.\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39965&avatarType=issuetype\",\"name\":\"Story\",\"subtask\":false,\"avatarId\":39965},\"description\":\"h3. User story\\r\\n*AS A* cusomter signing up for club memebership \\r\\n*I WANT TO* have access to club features without going throgh the DOI process\\r\\n*SO THAT* I redeem club vouchers, use free shipping etc\\r\\n\\r\\nh4. Background/Business needs\\r\\n\\r\\nThere is a legal requirement in Germany to be able to proof the customers consent signing up for marketing materials. Before sending any email with marketing material we must ensure that we have their consent and the way to do that is through double opt-in.\\r\\n\\r\\nWhen signing up for H&M Club, you are signing up for Newsletters simultaneously, and to encourage customers to confirm their email address to receive newsletters, the access to Club features has been limited. \\r\\n\\r\\nBusiness has decided that the club members shall no longer be stopped from accessing the club pages just because they have not confirmed their email address, as it's not a legal requirement to confirm the email address to access Club features. \\r\\n\\r\\nSo the email that is sent out today has two purposes the confirmation to receive newsletters and to access club features/offers. After this change is done the email is only for the customer to consent that H&M can send marketing material. The customer will have full access to the club without double opt in.\\r\\n\\r\\nh4. Dependencies\\r\\ncustomer team\\r\\n\\r\\nh4. Notes/Detailed Requirement\\r\\n- Give customers access to club features without DOI\\r\\n- that after the change, any newly joined club members will have immediate access to the full club functionality, same as in non-Double Opt In countries. The end state will be the same as for a confirmed club member that has changed their email and not confirmed it yet.\\r\\n\\r\\n\\r\\nh4. Business contacts\\r\\n\\r\\n * Responsible BSA : jalve\\r\\n \\r\\n\\r\\n\\r\\nh3. Acceptance criteria\\r\\n\\r\\nh5. Scenario 1 - \\r\\nGIVEN a customer in “Pending Join Club” state\\r\\nWHEN the customer visits the SmartWeb MY H&M page\\r\\nTHEN a “spinner” icon is displayed while waiting for the “Pending Join Club” state to be removed\\r\\nAND the customer is redirected to the H&M Club page when the “Pending Join Club” state disappears\\r\\nOR the current message displayed is replaced by the waiting error message (\\\"club.error.accountupdate.failed.message\\\") if the wait timeout is reached\\r\\n\\r\\n(The spinner behavior needs to be the same as in non-DOI countries)\\r\\n\\r\\nh5. Scenario 2 - \\r\\nGIVEN a customer that registered with club\\r\\nWHEN the customer is redirected for the first time to the SmartWeb MY H&M page, after the registration\\r\\nTHEN the customer sees the “Almost there” message, asking to confirm the membership\\r\\n(The message copy keys already exist: \\\"loyaltyclub.doubleoptin.fashion.news.thankyou.confirm.heading\\\"  AND \\\"loyaltyclub.doubleoptin.fashion.news.thankyou.confirm.text\\\")\\r\\n\\r\\nh5. Scenario 3 - \\r\\nGIVEN a customer that registered with club\\r\\nAND never clicked on the email confirmation link\\r\\nWHEN the customer goes to the SmartWeb MY H&M page\\r\\nTHEN the customer sees the “Don’t forget” message, asking to confirm the membership\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/6\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410173/Resurs%205.png\",\"name\":\"None\",\"id\":\"6\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/10040\",\"description\":\"\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/inprogress.png\",\"name\":\"Testing\",\"id\":\"10040\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/4\",\"id\":4,\"key\":\"indeterminate\",\"colorName\":\"yellow\",\"name\":\"In Progress\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"628970\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/628970\",\"key\":\"HMCOM-45383\",\"fields\":{\"summary\":\"[Frontend] Smartweb - Club ID not visible when Online Status is active\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"Description : for a logged in Club user, Club ID not visible when Online Status is active.\\r\\n\\r\\nBusiness Impact: User will not be able to access and make use of the Club ID in case of active Online Status.\\r\\n\\r\\nSteps:\\r\\n # log in as valid Club user (regjan@hm.de/qwerty)\\r\\n # enable Maintenance Sign/ Online Status\\r\\n # verify Club ID \\r\\n\\r\\nActual : Club ID not visible when along with Maintenance Sign/ Online Status page\\r\\n\\r\\nExpected: Club ID should be visible\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"679400\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/679400\",\"key\":\"HMCOM-47925\",\"fields\":{\"summary\":\"[Tablet][Frontend] Unable to Change Password as the Change password button is hidden \",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"[Tablet] Unable to Change Password as the Change password button is hidden \\r\\n\\r\\nBuisness Impact : Customers cant change their password from Tablet touch point.\\r\\n\\r\\nSteps : \\r\\n1] Login to an account\\r\\n2] Navigate to My HM and Profile details\\r\\n3] Click on Change Password\\r\\n4] Enter present password / New Password / Retype New Password - Observe that the \\\"Change Password\\\" is hidden .. even after minimising the key board its still hidden\\r\\n\\r\\nExpected : Change Password button should not be hidden \\r\\nActual : Change Password button is hidden and customer not able to change password\\r\\n\\r\\nEnvironment : SIT\\r\\nTouch Point : Tablet\\r\\nMarket : DE AT\\r\\nDevice : Ipad Air 2 Ios 9.2.1\\r\\n\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/6\",\"description\":\"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/closed.png\",\"name\":\"Closed\",\"id\":\"6\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/3\",\"id\":3,\"key\":\"done\",\"colorName\":\"green\",\"name\":\"Done\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"695341\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/695341\",\"key\":\"HMCOM-48623\",\"fields\":{\"summary\":\"[Desktop][Frontend] Alignment of text “vor 12 Uhr, Mon - Sam 19-22” is not correct\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"[Desktop] Alignment of text “vor 12 Uhr, Mon - Sam 19-22” is not correct in desktop\\r\\n\\r\\n*Business Impact* Minor issue. Its not meeting the requirement\\r\\n\\r\\n\\r\\n*Steps to recreate the issue in test env*\\r\\n\\r\\n# navigate to DE market \\r\\n# Log in with atuzht.ogdepnf@ywb.be  / qwerty\\r\\n# Add items to bag\\r\\n# Lead to checkout \\r\\n# Check for Same day delivery text “vor 12 Uhr, Mon - Sam 19-22” \\r\\n\\r\\n*Observation* \\r\\n# Alignment is not correct. (Check the attached screen shots for details)\\r\\n\\r\\n\\r\\n*Expected result*\\r\\n# Check the attached screen shot (*mon-sam 19-22 *should be under *Nach house*)\\r\\n\\r\\n*NOTE* same happens with LND as well \\r\\n\\r\\n*Env Details* \\r\\nMKT: DE\\r\\nACC\\r\\niPhone 6Plus iOS 10.3.1, desktop \\r\\nECom\\r\\n\\r\\nversion : 1.88.01 \\r\\nrevision : 814d4e718e 2018-06-01 15:06:56 +0200 \\r\\ncommit date : 2018-06-01 15:06:56 +0200 \\r\\n\\r\\nAs code is there in production, it should be there in prod as well. But the SDD and LND are not enabled in Prod. \",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/8\",\"iconUrl\":\"https://jira.hm.com/secure/thumbnail/410170/_thumb_410170.png\",\"name\":\"2-Should\",\"id\":\"8\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/10037\",\"description\":\"\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/inprogress.png\",\"name\":\"Implementing\",\"id\":\"10037\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/4\",\"id\":4,\"key\":\"indeterminate\",\"colorName\":\"yellow\",\"name\":\"In Progress\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"694319\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/694319\",\"key\":\"HMCOM-48546\",\"fields\":{\"summary\":\"[Tablet][Frontend] Club info Texts are not perfectly aligned with one another in Thank You Page. \",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"The info text for joining Club for none club members are not with one another they miss placed in thank you.\\r\\n\\r\\n\\r\\n\\r\\n*Actual Result**:* The info texts are not aligned with another.\\r\\n\\r\\n*Expected Result*: All the info text should be aligned with one another.\\r\\n\\r\\n*Steps to recreate:*\\r\\n * Add product to Shopping Bag.\\r\\n * Continue to Checkout as a none club member.\\r\\n * Complete the purchase.\\r\\n * When you are in Thank you page check the info test for joining Club.\\r\\n\\r\\n \\r\\n\\r\\nTested,\\r\\n\\r\\nTest Env: ACC, SIT,\\r\\n\\r\\nMarket: DE,\\r\\n\\r\\nDevice: iPad Air\\r\\n\\r\\n \\r\\n\\r\\n \",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/9\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410171/Resurs%203.png\",\"name\":\"3-Could\",\"id\":\"9\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}},{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"695691\",\"self\":\"https://jira.hm.com/rest/agile/1.0/issue/695691\",\"key\":\"HMCOM-48629\",\"fields\":{\"summary\":\"[Tablet] Checkout my Information: GDPR Error message is not aligned with other text.\",\"issuetype\":{\"self\":\"https://jira.hm.com/rest/api/2/issuetype/15\",\"id\":\"15\",\"description\":\"Defects and discrepancies found\",\"iconUrl\":\"https://jira.hm.com/secure/viewavatar?size=xsmall&avatarId=39959&avatarType=issuetype\",\"name\":\"Defect\",\"subtask\":false,\"avatarId\":39959},\"description\":\"The red error message to remind the user click on Personal Policy checkbox is not aligned with other text in My Information page.\\r\\n\\r\\n \\r\\n\\r\\n*Expected:* It ** should be aligned with other text.\\r\\n*Actual Results:* The text is not aligned exactly.\\r\\n\\r\\n*Steps:*\\r\\n * Add product to Shopping Bag.\\r\\n * Click on New User.\\r\\n * At My information page.\\r\\n * Click on Continue button without clicking on Personal Privacy checkbox.\\r\\n\\r\\n \\r\\n\\r\\nTested,\\r\\n\\r\\nTest Env: ACC/SIT.\\r\\n\\r\\nMarket: DE,\\r\\n\\r\\nDevice: Ipad Air.\",\"priority\":{\"self\":\"https://jira.hm.com/rest/api/2/priority/9\",\"iconUrl\":\"https://jira.hm.com/secure/attachment/410171/Resurs%203.png\",\"name\":\"3-Could\",\"id\":\"9\"},\"status\":{\"self\":\"https://jira.hm.com/rest/api/2/status/1\",\"description\":\"The issue is open and ready for the assignee to start work on it.\",\"iconUrl\":\"https://jira.hm.com/images/icons/statuses/open.png\",\"name\":\"Open\",\"id\":\"1\",\"statusCategory\":{\"self\":\"https://jira.hm.com/rest/api/2/statuscategory/2\",\"id\":2,\"key\":\"new\",\"colorName\":\"blue-gray\",\"name\":\"To Do\"}}}}]}"
                val gson = GsonBuilder().serializeNulls().create()
                val issuesFeed = gson.fromJson(body1, IssuesFeed::class.java)

                for (item in issuesFeed.issues){
                    IssueDbTable(applicationContext).storeData(item,
                            item.fields,
                            item.fields.status,
                            item.fields.issuetype,
                            item.fields.priority,
                            item.fields.assignee?.avatarUrls
                    )
                }
            }
        })
    }
}